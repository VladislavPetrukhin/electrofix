/* =========================================================
   ElectroFix — theme.css (Bootstrap 5 dark tuned)
   Цели: глубина, аккуратный glow, приятные кнопки, читабельность
   ========================================================= */

:root{
  --bg: #0b0c10;
  --bg-2: #0f1116;
  --panel: #111319;
  --panel-2: #151826;
  --text: #f8f9fa;
  --muted: #9aa4ad;

  --accent: #ffc107;                /* Bootstrap warning vibe */
  --accent-2: #ffdd66;
  --accent-soft: rgba(255,193,7,.14);

  --border: rgba(255,255,255,.09);
  --border-2: rgba(255,255,255,.14);

  --shadow: 0 18px 40px rgba(0,0,0,.45);
  --shadow-soft: 0 10px 24px rgba(0,0,0,.30);

  --radius: 16px;
  --radius-sm: 12px;
}

/* Bootstrap variables under dark theme */
html[data-bs-theme="dark"]{
  --bs-body-bg: var(--bg);
  --bs-body-color: var(--text);

  --bs-border-color: #2b3038;
  --bs-tertiary-bg: var(--panel);

  --bs-card-bg: var(--panel);
  --bs-card-border-color: #2b3038;
}

/* ---------------------------------------------------------
   Base
   --------------------------------------------------------- */
*{ box-sizing: border-box; }

body{
  font-family: "Segoe UI", system-ui, -apple-system, Arial, sans-serif;
  background:
    radial-gradient(900px 500px at 18% -10%, rgba(80,115,255,.12) 0%, transparent 55%),
    radial-gradient(900px 500px at 82% 0%, rgba(255,193,7,.10) 0%, transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,.02), transparent 32%),
    var(--bg);
  color: var(--text);
}

/* links */
a{ color: var(--accent-2); }
a:hover{ color: var(--accent); }

/* ---------------------------------------------------------
   Layout helpers
   --------------------------------------------------------- */
#main-content{
  margin-top: 20px;
  margin-bottom: 40px;
}

/* Toast area (lab ID selector example) */
#toastArea{
  position: fixed;
  right: 16px;
  bottom: 16px;
  z-index: 1080;
}

/* ---------------------------------------------------------
   Header / Navbar
   --------------------------------------------------------- */
.site-header{
  background: rgba(10,12,16,.55);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(10px);
}

.brand{
  font-weight: 800;
  letter-spacing: .3px;
  color: var(--text);
  position: relative;
}

.brand::after{
  content:"";
  display:inline-block;
  width: 10px;
  height: 10px;
  margin-left: 8px;
  border-radius: 999px;
  background: var(--accent);
  box-shadow: 0 0 18px rgba(255,193,7,.55);
  transform: translateY(-1px);
}

/* top nav links (header.php has plain <a>) */
.site-header nav a{
  color: var(--muted);
  text-decoration: none;
  margin-left: 14px;
  position: relative;
  padding: 6px 2px;
  transition: color .18s ease;
}

.site-header nav a:hover{
  color: var(--text);
}

.site-header nav a::after{
  content:"";
  position:absolute;
  left:0;
  bottom: -2px;
  width:0;
  height:2px;
  background: var(--accent);
  transition: width .18s ease;
  border-radius: 999px;
}

.site-header nav a:hover::after{ width:100%; }

/* search input in header */
.site-header .form-control.form-control-sm{
  background: rgba(15,17,22,.9);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 10px;
  padding: .35rem .55rem;
}

.site-header .form-control.form-control-sm::placeholder{
  color: rgba(154,164,173,.75);
}

.site-header .form-control.form-control-sm:focus{
  border-color: rgba(255,193,7,.55);
  box-shadow: 0 0 0 .25rem rgba(255,193,7,.12);
}

/* ---------------------------------------------------------
   Hero
   --------------------------------------------------------- */
.hero{
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background:
    linear-gradient(180deg, rgba(255,255,255,.03), transparent 65%),
    radial-gradient(700px 240px at 20% 0%, rgba(255,193,7,.12) 0%, transparent 60%),
    radial-gradient(700px 240px at 80% 0%, rgba(80,115,255,.10) 0%, transparent 60%),
    rgba(17,19,25,.65);
  box-shadow: var(--shadow);
}

.hero-title{
  font-weight: 800;
  letter-spacing: .5px;
}

.hero .lead{
  color: rgba(154,164,173,.95);
}

/* ---------------------------------------------------------
   Cards (Bootstrap tuned)
   --------------------------------------------------------- */
.card{
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 55%), var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
}

.section-card{
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}

.section-card:hover{
  transform: translateY(-3px);
  border-color: var(--border-2);
  box-shadow: 0 22px 50px rgba(0,0,0,.55);
}

/* Devices page card */
.device-card img{
  border-color: var(--border) !important;
}

/* Guide preview on guides.php */
#guidePreview{
  min-height: 320px;
}

/* list-group items on guides.php (you use bg-dark text-light border-secondary) */
.list-group-item{
  border-color: var(--border) !important;
}
.list-group-item-action:hover{
  background: rgba(255,255,255,.04) !important;
}

/* ---------------------------------------------------------
   Buttons
   --------------------------------------------------------- */
.btn{
  border-radius: 12px;
  font-weight: 600;
  transition: transform .15s ease, box-shadow .15s ease, background-color .15s ease, border-color .15s ease;
}

.btn:active{
  transform: translateY(1px);
}

.btn-warning{
  background: linear-gradient(135deg, var(--accent-2), var(--accent));
  border: none;
  color: #000;
  box-shadow: 0 10px 24px rgba(255,193,7,.22);
}

.btn-warning:hover{
  transform: translateY(-1px);
  box-shadow: 0 14px 30px rgba(255,193,7,.28);
  color: #000;
}

.btn-outline-light{
  border-color: var(--border);
  color: var(--text);
}

.btn-outline-light:hover{
  background: rgba(255,255,255,.06);
  border-color: var(--border-2);
}

.btn-outline-info{
  border-color: rgba(80,115,255,.45);
  color: #b7c6ff;
}

.btn-outline-info:hover{
  background: rgba(80,115,255,.12);
  border-color: rgba(80,115,255,.65);
  color: #dbe3ff;
}

/* ---------------------------------------------------------
   Forms
   --------------------------------------------------------- */
.form-control, .form-select{
  background-color: rgba(15,17,22,.95);
  color: var(--text);
  border-color: var(--border);
  border-radius: 12px;
}

.form-control::placeholder{ color: rgba(154,164,173,.75); opacity: 1; }

.form-control:focus, .form-select:focus{
  border-color: rgba(255,193,7,.55);
  box-shadow: 0 0 0 .25rem rgba(255,193,7,.12);
}

/* ---------------------------------------------------------
   Tables
   --------------------------------------------------------- */
.table thead th{
  border-bottom: 2px solid rgba(255,255,255,.10);
}

.table tbody tr:hover{
  background-color: rgba(255,255,255,0.035) !important;
}

.table.table-dark{
  --bs-table-bg: transparent;
}

/* ---------------------------------------------------------
   Typography highlights (lab formatting tags)
   --------------------------------------------------------- */
strong, b{ color: var(--accent); }
em, i{ color: #9fd3ff; }

.text-secondary{
  color: rgba(154,164,173,.95) !important;
}

/* Search highlight from search.php */
.search-hit{
  background: rgba(255,193,7,.35);
  color: #fff;
  padding: 0 .15em;
  border-radius: 4px;
}

/* ---------------------------------------------------------
   Video block
   --------------------------------------------------------- */
video{
  border-radius: 12px;
  background: #000;
}

/* ---------------------------------------------------------
   Offcanvas / Modal (for AJAX details)
   --------------------------------------------------------- */
.offcanvas, .modal-content{
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 60%), var(--panel);
  border: 1px solid var(--border);
  color: var(--text);
}

.offcanvas-header{
  border-bottom: 1px solid var(--border);
}

.modal-header{
  border-bottom: 1px solid var(--border);
}

.btn-close{
  filter: invert(1) grayscale(1);
  opacity: .7;
}
.btn-close:hover{ opacity: 1; }

/* ---------------------------------------------------------
   Footer
   --------------------------------------------------------- */
.site-footer{
  background: rgba(5,6,8,.75);
  border-top: 1px solid var(--border);
  backdrop-filter: blur(10px);
  padding: 14px 0;
  color: rgba(173,181,189,.95);
}

/* ---------------------------------------------------------
   Small polish
   --------------------------------------------------------- */
hr.border-secondary{
  opacity: .35;
}

code{
  color: #dbe3ff;
  background: rgba(80,115,255,.10);
  border: 1px solid rgba(80,115,255,.18);
  padding: .12em .35em;
  border-radius: 8px;
}
/* Колонка тоже flex — иначе h-100 не работает */
.row > [class*="col"] {
  display: flex;
}

/* Карточка растягивается на всю высоту колонки */
.device-card {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;

  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 60%),
              #111319;
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 16px;

  transition:
    transform .2s ease,
    box-shadow .2s ease,
    border-color .2s ease;
}

/* ---------- HOVER ---------- */
.device-card:hover {
  transform: translateY(-6px);
  border-color: rgba(255,193,7,.45);
  box-shadow:
    0 30px 60px rgba(0,0,0,.55),
    0 0 0 1px rgba(255,193,7,.25);
}

/* ---------- IMAGE ZONE ---------- */
.device-card img,
.device-card .card-img-top {
  height: 200px;              /* фикс */
  width: 100%;
  object-fit: contain;        /* не обрезаем */
  background: #ffffff;        /* белая подложка */
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 12px;
}

/* ---------- BODY ---------- */
.device-card .card-body {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  padding: 0;
}

/* ---------- TITLE ---------- */
.device-card .card-title {
  min-height: 2.6em;          /* ~2 строки */
  line-height: 1.3;
  margin-bottom: .25rem;
}

/* ---------- CATEGORY ---------- */
.device-card .card-subtitle {
  min-height: 1.4em;
  font-size: .9rem;
  color: #9aa4ad;
}

/* ---------- DESCRIPTION ---------- */
.device-card .card-text {
  flex-grow: 1;
  margin-top: .5rem;
  margin-bottom: 1rem;

  display: -webkit-box;
  -webkit-line-clamp: 3;      /* максимум 3 строки */
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ---------- BUTTON ---------- */
.device-card .btn {
  margin-top: auto;           /* КЛЮЧ */
}

/* Микро-анимация кнопки при hover карточки */
.device-card:hover .btn {
  background: linear-gradient(135deg, #ffd84d, #ffc107);
  color: #000;
  border-color: transparent;
}
/* =========================================================
   Guides — list items hover / active
   ========================================================= */

.list-group-item{
  background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 60%),
              #111319 !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  border-radius: 14px !important;
  margin-bottom: 10px;
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
}

.list-group-item-action:hover{
  transform: translateY(-4px);
  border-color: rgba(255,193,7,.35) !important;
  box-shadow: 0 22px 50px rgba(0,0,0,.55);
  background: linear-gradient(180deg, rgba(255,193,7,.06), transparent 65%),
              #111319 !important;
}

/* Выбранный (если ты добавляешь .active по клику) */
.list-group-item.active,
.list-group-item.active:hover{
  border-color: rgba(255,193,7,.55) !important;
  box-shadow: 0 0 0 1px rgba(255,193,7,.25), 0 22px 50px rgba(0,0,0,.55);
  background: linear-gradient(180deg, rgba(255,193,7,.10), transparent 65%),
              #111319 !important;
  color: #f8f9fa !important;
}
/* =========================================================
   Guides — preview panel polish
   ========================================================= */

#guidePreview.card{
  border-radius: 16px;
  border-color: rgba(255,255,255,.09);
  overflow: hidden;
}

#guidePreview .card-body{
  padding: 1.25rem;
}

#guidePreview img{
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
}

#guidePreview .text-secondary{
  color: rgba(154,164,173,.95) !important;
}
/* =========================================================
   Issues — table row hover polish
   ========================================================= */

#issuesTable tbody tr{
  transition: transform .15s ease, background-color .15s ease, box-shadow .15s ease;
}

#issuesTable tbody tr:hover{
  background-color: rgba(255,255,255,0.045) !important;
  box-shadow: inset 3px 0 0 rgba(255,193,7,.55);
}

#issuesTable tbody tr:hover td{
  color: #fff;
}

#issuesTable td, #issuesTable th{
  border-color: rgba(255,255,255,.08) !important;
}
/* =========================================================
   Small buttons hover
   ========================================================= */

.btn.btn-sm{
  border-radius: 12px;
}

.btn-outline-light.btn-sm:hover{
  border-color: rgba(255,193,7,.45);
  box-shadow: 0 10px 22px rgba(255,193,7,.10);
}
/* Optional: soft glow on hover elements */
.device-card:hover,
.list-group-item-action:hover,
#guidePreview.card:hover{
  box-shadow:
    0 26px 60px rgba(0,0,0,.55),
    0 0 0 1px rgba(255,193,7,.20);
}
/* =========================================================
   Issues table — UI upgrade
   ========================================================= */

/* Общий контейнер таблицы */
#issuesTable {
  border-collapse: separate;
  border-spacing: 0 10px; /* расстояние между строками */
}

/* Заголовки */
#issuesTable thead th {
  font-weight: 600;
  color: #e6e6e6;
  border-bottom: none !important;
  padding-bottom: 12px;
}

/* Строка как "карточка" */
#issuesTable tbody tr {
  background:
    linear-gradient(180deg, rgba(255,255,255,.02), transparent 60%),
    #111319;
  border-radius: 14px;
  box-shadow: 0 10px 24px rgba(0,0,0,.35);
  transition:
    transform .18s ease,
    box-shadow .18s ease,
    background .18s ease;
}

/* Чтобы border-radius реально работал */
#issuesTable tbody tr td:first-child {
  border-top-left-radius: 14px;
  border-bottom-left-radius: 14px;
}
#issuesTable tbody tr td:last-child {
  border-top-right-radius: 14px;
  border-bottom-right-radius: 14px;
}

/* Ячейки */
#issuesTable tbody td {
  border: none !important;
  padding: 14px 16px;
  vertical-align: middle;
}

/* Hover строки */
#issuesTable tbody tr:hover {
  transform: translateY(-3px);
  box-shadow:
    0 22px 50px rgba(0,0,0,.55),
    inset 4px 0 0 rgba(255,193,7,.55); /* акцент слева */
}

/* ---------------------------------------------------------
   Severity badges (без изменения HTML)
   --------------------------------------------------------- */

/* Критическая */
#issuesTable td:contains("Критическая"),
#issuesTable td:contains("Критическая") {
  color: #ff6b6b;
  font-weight: 600;
}

/* Средняя */
#issuesTable td:contains("Средняя") {
  color: #ffc107;
  font-weight: 500;
}

/* Низкая (на будущее) */
#issuesTable td:contains("Низкая") {
  color: #6ee7b7;
  font-weight: 500;
}

/* ---------------------------------------------------------
   Кнопка "Подробнее"
   --------------------------------------------------------- */

#issuesTable .btn {
  border-radius: 999px;
  padding: 6px 14px;
  font-size: .85rem;
  transition:
    background .15s ease,
    box-shadow .15s ease,
    border-color .15s ease;
}

#issuesTable tbody tr:hover .btn {
  background: linear-gradient(135deg, #ffd84d, #ffc107);
  color: #000;
  border-color: transparent;
  box-shadow: 0 8px 20px rgba(255,193,7,.25);
}
/* =========================================================
   Issues — FIX yellow border flicker
   ========================================================= */

/* Строка как контейнер */
#issuesTable tbody tr {
  position: relative;
  overflow: hidden; /* важно */
  transition:
    transform .18s ease,
    box-shadow .18s ease,
    background .18s ease;
}

/* УБИРАЕМ старый inset-акцент */
#issuesTable tbody tr:hover {
  transform: translateY(-3px);
  box-shadow: 0 22px 50px rgba(0,0,0,.55);
}

/* НОВЫЙ акцент слева — через псевдоэлемент */
#issuesTable tbody tr::before {
  content: "";
  position: absolute;
  left: 0;
  top: 8px;
  bottom: 8px;
  width: 4px;
  background: linear-gradient(
    180deg,
    #ffd84d,
    #ffc107
  );
  border-radius: 4px;
  opacity: 0;
  transition: opacity .18s ease;
}

/* Показываем акцент ТОЛЬКО на hover */
#issuesTable tbody tr:hover::before {
  opacity: 1;
}
/* =========================================================
   Issues — FIX missing "Симптом" text
   ========================================================= */

/* Убираем псевдоэлемент со строки */
#issuesTable tbody tr::before {
  content: none !important;
}

/* Строка больше не режет содержимое */
#issuesTable tbody tr {
  overflow: visible;
}

/* Первая ячейка — контейнер для акцента */
#issuesTable tbody td:first-child {
  position: relative;
  padding-left: 22px; /* место под акцент */
}

/* Акцент СЛЕВА — внутри первой ячейки */
#issuesTable tbody td:first-child::before {
  content: "";
  position: absolute;
  left: 8px;
  top: 10px;
  bottom: 10px;
  width: 4px;
  border-radius: 4px;
  background: linear-gradient(180deg, #ffd84d, #ffc107);
  opacity: 0;
  transition: opacity .18s ease;
}

/* Показываем акцент при hover строки */
#issuesTable tbody tr:hover td:first-child::before {
  opacity: 1;
}
