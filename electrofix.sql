-- phpMyAdmin SQL Dump
-- version 5.2.3
-- https://www.phpmyadmin.net/
--
-- Хост: localhost
-- Время создания: Дек 18 2025 г., 00:30
-- Версия сервера: 5.7.39
-- Версия PHP: 7.2.34

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- База данных: `electrofix`
--

-- --------------------------------------------------------

--
-- Структура таблицы `devices`
--

CREATE TABLE `devices` (
  `id` int(11) NOT NULL,
  `name` varchar(128) NOT NULL,
  `category` varchar(64) DEFAULT NULL,
  `short_desc` text,
  `full_desc` text,
  `thumb_path` varchar(255) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Дамп данных таблицы `devices`
--

INSERT INTO `devices` (`id`, `name`, `category`, `short_desc`, `full_desc`, `thumb_path`, `created_at`, `updated_at`) VALUES
(17, 'Ноутбук', 'Компьютеры', 'Портативный компьютер для работы и учёбы', 'Ноутбук — портативный персональный компьютер, включающий экран, клавиатуру и аккумулятор.', '/uploads/devices/laptop.jpg', '2025-12-17 23:58:49', '2025-12-17 23:58:49'),
(18, 'Смартфон', 'Мобильные устройства', 'Современный мобильный телефон', 'Смартфон сочетает функции телефона и карманного компьютера.', '/uploads/devices/smartphone.jpg', '2025-12-17 23:58:49', '2025-12-17 23:58:49'),
(19, 'Планшет', 'Мобильные устройства', 'Устройство с сенсорным экраном', 'Планшет используется для просмотра контента, работы и обучения.', '/uploads/devices/tablet.jpg', '2025-12-17 23:58:49', '2025-12-17 23:58:49'),
(20, 'Стационарный ПК', 'Компьютеры', 'Настольный персональный компьютер', 'Стационарный ПК используется для игр, работы и профессиональных задач.', '/uploads/devices/desktop.jpg', '2025-12-17 23:58:49', '2025-12-17 23:58:49'),
(21, 'Маршрутизатор', 'Сетевое оборудование', 'Устройство для распределения интернета', 'Роутер обеспечивает доступ к сети для нескольких устройств.', '/uploads/devices/router.jpg', '2025-12-17 23:58:49', '2025-12-17 23:58:49');

-- --------------------------------------------------------

--
-- Структура таблицы `guides`
--

CREATE TABLE `guides` (
  `id` int(11) NOT NULL,
  `device_id` int(11) DEFAULT NULL,
  `title` varchar(255) NOT NULL,
  `summary` text,
  `content` mediumtext,
  `cover_path` varchar(255) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Дамп данных таблицы `guides`
--

INSERT INTO `guides` (`id`, `device_id`, `title`, `summary`, `content`, `cover_path`, `created_at`) VALUES
(1, NULL, 'Диагностика “не включается” (ноутбук)', 'Быстрый алгоритм: от БП до дежурок.', '1) Проверяем БП и разъём\n2) Ищем +19V на входе\n3) Дежурки 3/5V\n4) Кнопка и EC\n5) Дальше — по схемам', 'media/laptop-no-power.jpg', '2025-12-14 00:23:19'),
(2, NULL, 'Как победить перегрев', 'Чистка и термоинтерфейсы без фанатизма.', '1) Разбор\n2) Чистка радиатора\n3) Замена пасты\n4) Проверка вентиляторов\n5) Тест под нагрузкой', 'media/laptop-overheat.jpg', '2025-12-14 00:23:19'),
(3, NULL, 'Ноутбук не включается', 'Диагностика питания и кнопки включения', 'Проверь адаптер питания, кабель, разъём и кнопку включения. Часто проблема связана с блоком питания или аккумулятором.', NULL, '2025-12-14 15:19:32'),
(4, NULL, 'Перегрев ноутбука', 'Причины перегрева и способы охлаждения', 'Основные причины перегрева — пыль, высохшая термопаста и плохая вентиляция. Рекомендуется чистка и замена термопасты.', NULL, '2025-12-14 15:19:32'),
(5, NULL, 'Смартфон быстро разряжается', 'Диагностика аккумулятора', 'Причиной может быть износ аккумулятора, фоновые приложения или высокая яркость экрана.', NULL, '2025-12-14 15:19:32'),
(6, NULL, 'Смартфон не заряжается', 'Проблемы с зарядкой', 'Проверь кабель, адаптер, разъём зарядки. Часто проблема в загрязнении порта.', NULL, '2025-12-14 15:19:32'),
(7, NULL, 'Планшет зависает', 'Программные причины зависаний', 'Зависания могут быть вызваны нехваткой памяти или ошибками в прошивке.', NULL, '2025-12-14 15:19:32'),
(8, NULL, 'ПК не загружается', 'Диагностика аппаратных компонентов', 'Проверь блок питания, оперативную память и подключение жёсткого диска.', NULL, '2025-12-14 15:19:32'),
(9, NULL, 'Нет изображения на мониторе', 'Проверка видеосигнала', 'Проверь кабель, видеовыход и настройки источника сигнала.', NULL, '2025-12-14 15:19:32'),
(10, NULL, 'Принтер не печатает', 'Распространённые проблемы печати', 'Проверь драйверы, наличие бумаги и состояние картриджей.', NULL, '2025-12-14 15:19:32'),
(11, NULL, 'Роутер не раздаёт интернет', 'Диагностика сетевых проблем', 'Проверь настройки WAN, кабель провайдера и перезагрузи устройство.', NULL, '2025-12-14 15:19:32'),
(12, NULL, 'ИБП пищит', 'Причины звуковых сигналов', 'Звуковой сигнал может означать разряд батареи или перегрузку.', NULL, '2025-12-14 15:19:32'),
(13, NULL, 'Замена аккумулятора ноутбука', 'Пошаговая инструкция по замене батареи', 'Отключите ноутбук, извлеките аккумулятор, установите новый и выполните калибровку.', '/uploads/guides/laptop-battery.jpg', '2025-12-17 23:50:09'),
(14, NULL, 'Оптимизация батареи смартфона', 'Как продлить время работы смартфона', 'Отключите ненужные приложения, уменьшите яркость экрана.', '/uploads/guides/smartphone-battery.jpg', '2025-12-17 23:50:09'),
(15, NULL, 'Чистка ПК от пыли', 'Профилактика перегрева компьютера', 'Отключите питание, аккуратно очистите компоненты сжатым воздухом.', '/uploads/guides/pc-cleaning.jpg', '2025-12-17 23:50:09'),
(16, NULL, 'Сброс настроек роутера', 'Как восстановить интернет-соединение', 'Нажмите кнопку Reset и настройте роутер заново.', '/uploads/guides/router-reset.jpg', '2025-12-17 23:50:09'),
(17, 17, 'Чистка ноутбука от пыли', 'Профилактика перегрева ноутбука', 'Отключите ноутбук от питания, разберите корпус и аккуратно удалите пыль из системы охлаждения.', '/uploads/guides/laptop-cleaning.jpg', '2025-12-18 00:17:39'),
(18, 17, 'Замена термопасты в ноутбуке', 'Снижение температуры процессора', 'Снимите систему охлаждения, очистите старую термопасту и нанесите новую тонким слоем.', '/uploads/guides/laptop-thermal.jpg', '2025-12-18 00:17:39'),
(19, 17, 'Замена аккумулятора ноутбука', 'Как продлить автономную работу', 'Извлеките старый аккумулятор и установите новый, совместимый с моделью ноутбука.', '/uploads/guides/laptop-battery.jpg', '2025-12-18 00:17:39'),
(20, 17, 'Ноутбук не видит Wi-Fi', 'Решение проблем с беспроводной сетью', 'Проверьте драйверы адаптера и настройки сети.', '/uploads/guides/laptop-wifi.jpg', '2025-12-18 00:17:39'),
(21, 17, 'Ускорение работы ноутбука', 'Оптимизация системы', 'Отключите автозагрузку лишних программ и очистите диск.', '/uploads/guides/laptop-speed.jpg', '2025-12-18 00:17:39'),
(22, 18, 'Экономия заряда смартфона', 'Продление времени работы батареи', 'Уменьшите яркость экрана и отключите фоновые приложения.', '/uploads/guides/phone-battery.jpg', '2025-12-18 00:17:39'),
(23, 18, 'Замена экрана смартфона', 'Инструкция по замене дисплея', 'Аккуратно разберите корпус и установите новый дисплей.', '/uploads/guides/phone-screen.jpg', '2025-12-18 00:17:39'),
(24, 18, 'Телефон не заряжается', 'Диагностика проблемы зарядки', 'Проверьте кабель, адаптер и разъём зарядки.', '/uploads/guides/phone-charge.jpg', '2025-12-18 00:17:39'),
(25, 18, 'Смартфон перегревается', 'Причины и решения', 'Удалите ресурсоёмкие приложения и обновите систему.', '/uploads/guides/phone-heat.jpg', '2025-12-18 00:17:39'),
(26, 18, 'Сброс смартфона к заводским настройкам', 'Решение программных сбоев', 'Сделайте резервную копию и выполните сброс через настройки.', '/uploads/guides/phone-reset.jpg', '2025-12-18 00:17:39'),
(27, 19, 'Планшет не включается', 'Первичная диагностика', 'Подключите зарядку и попробуйте выполнить принудительную перезагрузку.', '/uploads/guides/tablet-power.jpg', '2025-12-18 00:17:39'),
(28, 19, 'Замена сенсорного стекла планшета', 'Ремонт тачскрина', 'Снимите повреждённое стекло и установите новое.', '/uploads/guides/tablet-touch.jpg', '2025-12-18 00:17:39'),
(29, 19, 'Планшет тормозит', 'Оптимизация работы', 'Очистите память и удалите ненужные приложения.', '/uploads/guides/tablet-slow.jpg', '2025-12-18 00:17:39'),
(30, 19, 'Планшет не подключается к Wi-Fi', 'Решение проблем с сетью', 'Проверьте настройки сети и перезагрузите устройство.', '/uploads/guides/tablet-wifi.jpg', '2025-12-18 00:17:39'),
(31, 20, 'Чистка системного блока', 'Удаление пыли из ПК', 'Отключите питание и очистите компоненты сжатым воздухом.', '/uploads/guides/pc-cleaning.jpg', '2025-12-18 00:17:39'),
(32, 20, 'Замена блока питания', 'Что делать, если ПК не включается', 'Подберите блок питания подходящей мощности и установите его.', '/uploads/guides/pc-psu.jpg', '2025-12-18 00:17:39'),
(33, 20, 'Синий экран Windows', 'Диагностика BSOD', 'Проверьте драйверы и оперативную память.', '/uploads/guides/pc-bsod.jpg', '2025-12-18 00:17:39'),
(34, 20, 'Обновление драйверов ПК', 'Повышение стабильности системы', 'Скачайте драйверы с официальных сайтов производителей.', '/uploads/guides/pc-drivers.jpg', '2025-12-18 00:17:39'),
(35, 21, 'Настройка Wi-Fi роутера', 'Базовая настройка сети', 'Подключитесь к панели управления и задайте параметры сети.', '/uploads/guides/router-setup.jpg', '2025-12-18 00:17:39'),
(36, 21, 'Сброс настроек роутера', 'Возврат к заводским настройкам', 'Нажмите кнопку Reset и выполните повторную настройку.', '/uploads/guides/router-reset.jpg', '2025-12-18 00:17:39'),
(37, 21, 'Обновление прошивки роутера', 'Повышение стабильности работы', 'Скачайте прошивку с сайта производителя и обновите устройство.', '/uploads/guides/router-firmware.jpg', '2025-12-18 00:17:39'),
(38, 21, 'Усиление сигнала Wi-Fi', 'Как улучшить покрытие сети', 'Измените расположение роутера и выберите свободный канал.', '/uploads/guides/router-signal.jpg', '2025-12-18 00:17:39');

-- --------------------------------------------------------

--
-- Структура таблицы `issues`
--

CREATE TABLE `issues` (
  `id` int(11) NOT NULL,
  `device_id` int(11) DEFAULT NULL,
  `symptom` varchar(255) NOT NULL,
  `causes` text,
  `solution` text,
  `severity` varchar(32) DEFAULT NULL,
  `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Дамп данных таблицы `issues`
--

INSERT INTO `issues` (`id`, `device_id`, `symptom`, `causes`, `solution`, `severity`, `created_at`) VALUES
(24, 17, 'Ноутбук не включается', 'Разряжен аккумулятор, неисправен блок питания', 'Проверить зарядное устройство, заменить аккумулятор', 'Критическая', '2025-12-18 00:15:58'),
(25, 17, 'Ноутбук сильно греется', 'Пыль в системе охлаждения, высохла термопаста', 'Очистка от пыли, замена термопасты', 'Средняя', '2025-12-18 00:15:58'),
(26, 17, 'Не работает клавиатура', 'Залитие жидкостью, износ шлейфа', 'Замена клавиатуры или шлейфа', 'Средняя', '2025-12-18 00:15:58'),
(27, 17, 'Экран мигает', 'Неисправный шлейф матрицы', 'Проверить и заменить шлейф', 'Средняя', '2025-12-18 00:15:58'),
(28, 17, 'Ноутбук медленно работает', 'Перегруженная ОС, нехватка ОЗУ', 'Очистка системы, добавление памяти', 'Низкая', '2025-12-18 00:15:58'),
(29, 18, 'Смартфон быстро разряжается', 'Износ аккумулятора, фоновые приложения', 'Замена аккумулятора, оптимизация ПО', 'Средняя', '2025-12-18 00:15:58'),
(30, 18, 'Телефон не заряжается', 'Повреждён разъём зарядки или кабель', 'Замена разъёма или кабеля', 'Критическая', '2025-12-18 00:15:58'),
(31, 18, 'Смартфон перегревается', 'Высокая нагрузка процессора', 'Закрыть фоновые приложения, обновить систему', 'Средняя', '2025-12-18 00:15:58'),
(32, 18, 'Не работает камера', 'Сбой ПО или повреждение модуля', 'Перезагрузка, замена камеры', 'Средняя', '2025-12-18 00:15:58'),
(33, 18, 'Нет сети', 'Повреждение SIM-карты или антенны', 'Замена SIM или ремонт антенны', 'Критическая', '2025-12-18 00:15:58'),
(34, 19, 'Планшет не включается', 'Разряжен аккумулятор', 'Подключить зарядное устройство, заменить АКБ', 'Критическая', '2025-12-18 00:15:58'),
(35, 19, 'Экран не реагирует на касания', 'Повреждён сенсор', 'Замена тачскрина', 'Средняя', '2025-12-18 00:15:58'),
(36, 19, 'Планшет зависает', 'Нехватка памяти, ошибки ПО', 'Сброс к заводским настройкам', 'Средняя', '2025-12-18 00:15:58'),
(37, 19, 'Не работает Wi-Fi', 'Сбой настроек сети', 'Перезагрузка и повторная настройка Wi-Fi', 'Низкая', '2025-12-18 00:15:58'),
(38, 19, 'Быстро садится батарея', 'Износ аккумулятора', 'Замена аккумулятора', 'Средняя', '2025-12-18 00:15:58'),
(39, 20, 'ПК не включается', 'Неисправен блок питания', 'Проверить или заменить БП', 'Критическая', '2025-12-18 00:15:58'),
(40, 20, 'Компьютер сам перезагружается', 'Перегрев процессора', 'Очистка системы охлаждения', 'Критическая', '2025-12-18 00:15:58'),
(41, 20, 'Нет изображения на мониторе', 'Проблемы с видеокартой', 'Проверить видеокарту или заменить', 'Критическая', '2025-12-18 00:15:58'),
(42, 20, 'ПК шумит', 'Пыль в вентиляторах', 'Очистка вентиляторов', 'Низкая', '2025-12-18 00:15:58'),
(43, 20, 'Синий экран (BSOD)', 'Ошибка драйверов или ОЗУ', 'Проверка памяти, переустановка драйверов', 'Критическая', '2025-12-18 00:15:58'),
(44, 21, 'Нет доступа к интернету', 'Сбой у провайдера или настройки роутера', 'Перезагрузка, проверка настроек', 'Критическая', '2025-12-18 00:15:58'),
(45, 21, 'Wi-Fi постоянно обрывается', 'Помехи или устаревшая прошивка', 'Обновление прошивки', 'Средняя', '2025-12-18 00:15:58'),
(46, 21, 'Низкая скорость интернета', 'Перегруженный канал', 'Смена канала Wi-Fi', 'Средняя', '2025-12-18 00:15:58'),
(47, 21, 'Роутер не включается', 'Неисправен блок питания', 'Замена блока питания', 'Критическая', '2025-12-18 00:15:58'),
(48, 21, 'Не удаётся зайти в панель управления', 'Неверный IP или логин/пароль', 'Сброс настроек до заводских', 'Низкая', '2025-12-18 00:15:58');

-- --------------------------------------------------------

--
-- Структура таблицы `questions`
--

CREATE TABLE `questions` (
  `id` int(11) NOT NULL,
  `name` varchar(64) NOT NULL,
  `email` varchar(120) NOT NULL,
  `device` varchar(64) NOT NULL,
  `problem` text NOT NULL,
  `created_at` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Дамп данных таблицы `questions`
--

INSERT INTO `questions` (`id`, `name`, `email`, `device`, `problem`, `created_at`) VALUES
(1, 'Иван', 'ivan@example.com', 'Ноутбук', 'Не включается после обновления системы', '2025-12-17 23:50:15'),
(2, 'Анна', 'anna@mail.ru', 'Смартфон', 'Телефон сильно нагревается при зарядке', '2025-12-17 23:50:15'),
(3, 'Сергей', 'sergey@gmail.com', 'ПК', 'Компьютер выключается во время игры', '2025-12-17 23:50:15'),
(4, 'Ольга', 'olga@yandex.ru', 'Роутер', 'Пропадает интернет каждые 10 минут', '2025-12-17 23:50:15');

-- --------------------------------------------------------

--
-- Структура таблицы `roles`
--

CREATE TABLE `roles` (
  `id` int(11) NOT NULL,
  `name` varchar(32) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Дамп данных таблицы `roles`
--

INSERT INTO `roles` (`id`, `name`) VALUES
(1, 'admin');

-- --------------------------------------------------------

--
-- Структура таблицы `uploads`
--

CREATE TABLE `uploads` (
  `id` int(11) NOT NULL,
  `user_id` int(11) DEFAULT NULL,
  `original_name` varchar(255) NOT NULL,
  `file_path` varchar(255) NOT NULL,
  `mime` varchar(120) DEFAULT NULL,
  `size` int(11) DEFAULT NULL,
  `created_at` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Дамп данных таблицы `uploads`
--

INSERT INTO `uploads` (`id`, `user_id`, `original_name`, `file_path`, `mime`, `size`, `created_at`) VALUES
(1, 1, 'laptop.jpg', '/uploads/devices/laptop.jpg', 'image/jpeg', 245123, '2025-12-17 23:50:27'),
(2, 1, 'smartphone.jpg', '/uploads/devices/smartphone.jpg', 'image/jpeg', 198322, '2025-12-17 23:50:27'),
(3, 1, 'pc-cleaning.jpg', '/uploads/guides/pc-cleaning.jpg', 'image/jpeg', 312443, '2025-12-17 23:50:27');

-- --------------------------------------------------------

--
-- Структура таблицы `users`
--

CREATE TABLE `users` (
  `id` int(11) NOT NULL,
  `role_id` int(11) DEFAULT NULL,
  `username` varchar(64) NOT NULL,
  `pass_hash` varchar(255) NOT NULL,
  `created_at` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Дамп данных таблицы `users`
--

INSERT INTO `users` (`id`, `role_id`, `username`, `pass_hash`, `created_at`) VALUES
(1, 1, 'admin', '$2y$10$JDSV9zbSu9T23AXs65qoWuEXxjjDeZYmiSgljg8ytMs19oC/Zmeoe', '2025-12-14 00:25:47');

--
-- Индексы сохранённых таблиц
--

--
-- Индексы таблицы `devices`
--
ALTER TABLE `devices`
  ADD PRIMARY KEY (`id`);

--
-- Индексы таблицы `guides`
--
ALTER TABLE `guides`
  ADD PRIMARY KEY (`id`),
  ADD KEY `fk_guides_device` (`device_id`);

--
-- Индексы таблицы `issues`
--
ALTER TABLE `issues`
  ADD PRIMARY KEY (`id`),
  ADD KEY `fk_issues_device` (`device_id`);

--
-- Индексы таблицы `questions`
--
ALTER TABLE `questions`
  ADD PRIMARY KEY (`id`);

--
-- Индексы таблицы `roles`
--
ALTER TABLE `roles`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `name` (`name`);

--
-- Индексы таблицы `uploads`
--
ALTER TABLE `uploads`
  ADD PRIMARY KEY (`id`),
  ADD KEY `fk_uploads_user` (`user_id`);

--
-- Индексы таблицы `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `username` (`username`),
  ADD KEY `fk_users_role` (`role_id`);

--
-- AUTO_INCREMENT для сохранённых таблиц
--

--
-- AUTO_INCREMENT для таблицы `devices`
--
ALTER TABLE `devices`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=22;

--
-- AUTO_INCREMENT для таблицы `guides`
--
ALTER TABLE `guides`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=39;

--
-- AUTO_INCREMENT для таблицы `issues`
--
ALTER TABLE `issues`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=49;

--
-- AUTO_INCREMENT для таблицы `questions`
--
ALTER TABLE `questions`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT для таблицы `roles`
--
ALTER TABLE `roles`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT для таблицы `uploads`
--
ALTER TABLE `uploads`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT для таблицы `users`
--
ALTER TABLE `users`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- Ограничения внешнего ключа сохраненных таблиц
--

--
-- Ограничения внешнего ключа таблицы `guides`
--
ALTER TABLE `guides`
  ADD CONSTRAINT `fk_guides_device` FOREIGN KEY (`device_id`) REFERENCES `devices` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;

--
-- Ограничения внешнего ключа таблицы `issues`
--
ALTER TABLE `issues`
  ADD CONSTRAINT `fk_issues_device` FOREIGN KEY (`device_id`) REFERENCES `devices` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;

--
-- Ограничения внешнего ключа таблицы `uploads`
--
ALTER TABLE `uploads`
  ADD CONSTRAINT `fk_uploads_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;

--
-- Ограничения внешнего ключа таблицы `users`
--
ALTER TABLE `users`
  ADD CONSTRAINT `fk_users_role` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
